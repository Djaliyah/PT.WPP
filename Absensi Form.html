<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Form Absensi</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900 dark:bg-gray-900 dark:text-gray-100">
  <!-- Header -->
  <header class="flex justify-between items-center p-4 bg-white dark:bg-gray-800 shadow mb-6">
    <div class="flex items-center gap-4">
      <img src="Image/WPP TES ZOOM.PNG" alt="Logo" class="h-20" />
      <span class="text-xl font-bold text-gray-800 dark:text-white">PT. Wahana Perencana Persada</span>
    </div>
    <a href="Database Absensi.html" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold px-4 py-2 rounded">
      Database
    </a>
  </header>

  <!-- Form Absensi -->
  <div class="p-6 max-w-3xl mx-auto">
    <h1 class="text-2xl font-bold mb-4">Form Absensi</h1>
    <form id="absensiForm" class="space-y-4 bg-white dark:bg-gray-800 p-6 rounded shadow">
      <input type="hidden" id="editIndex" />
      <input type="text" id="no" placeholder="No" class="w-full p-2 border rounded dark:bg-gray-700" required />

      <!-- Dropdown untuk memilih ID Pegawai -->
      <select id="idPegawai" class="w-full p-2 border rounded dark:bg-gray-700" required>
        <option value="">Pilih ID Pegawai</option>
      </select>

      <!-- Input Nama yang terisi otomatis -->
      <input type="text" id="namaLengkap" placeholder="Nama Lengkap" class="w-full p-2 border rounded dark:bg-gray-700" readonly required />

      <input type="date" id="tanggal" class="w-full p-2 border rounded dark:bg-gray-700" required />
      <input type="time" id="jamMasuk" placeholder="Jam Masuk" class="w-full p-2 border rounded dark:bg-gray-700" required />
      <input type="time" id="jamKeluar" placeholder="Jam Keluar" class="w-full p-2 border rounded dark:bg-gray-700" required />
      <input type="text" id="keterangan" placeholder="Keterangan" class="w-full p-2 border rounded dark:bg-gray-700" />
      <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Simpan</button>
    </form>
  </div>

  <script>
    const karyawanList = [
  { id: '1001' },
  { id: '1002' },
  { id: '1003'},
  { id: '1009' },
  { id: '1010' },
  { id: '1011' },
  { id: '1013' },
  { id: '1015' },
  { id: '1018' },
  { id: '1022' },
  { id: '1024' },
  { id: '1026' },
  { id: '1027' },
  { id: '1028' },
  { id: '1029' },
  { id: '1030' },
  { id: '1032' },
  { id: '1033' },
  { id: '1035' },
  { id: '1036' },
  { id: '1038' },
  { id: '1039', nama: 'Syifa Fauziyah' },
  { id: '1040', nama: 'Reva Gunawan' },
  { id: '1043', nama: 'Muhamad Rizki Pratama' },
  { id: '1044', nama: 'Mohamad Kholilulloh' },
  { id: '1045', nama: 'Shafira Ahmad' }
];

    const selectId = document.getElementById('idPegawai');
    karyawanList.forEach(k => {
      const option = document.createElement('option');
      option.value = k.id;
      option.textContent = `${k.id} - ${k.nama}`;
      selectId.appendChild(option);
    });

    selectId.addEventListener('change', function () {
      const selected = karyawanList.find(k => k.id === this.value);
      document.getElementById('namaLengkap').value = selected ? selected.nama : '';
    });

    document.getElementById('absensiForm').addEventListener('submit', function(event) {
      event.preventDefault();

      const editIndex = document.getElementById('editIndex').value;

      const absensiData = {
        idPegawai: document.getElementById('idPegawai').value,
        nama: document.getElementById('namaLengkap').value,
        tanggal: document.getElementById('tanggal').value,
        jamMasuk: document.getElementById('jamMasuk').value,
        jamKeluar: document.getElementById('jamKeluar').value,
        keterangan: document.getElementById('keterangan').value
      };

      const existingData = JSON.parse(localStorage.getItem('absensiData')) || [];

      if (editIndex) {
        existingData[editIndex] = absensiData;
      } else {
        existingData.push(absensiData);
      }

      localStorage.setItem('absensiData', JSON.stringify(existingData));

      window.location.href = 'Database Absensi.html';
    });
  </script>
</body>
</html>
